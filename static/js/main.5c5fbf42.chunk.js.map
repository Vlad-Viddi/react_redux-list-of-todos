{"version":3,"sources":["store/index.ts","components/TodoItem.tsx","components/TodosList.tsx","helpers/api.ts","components/LoadingButtons.tsx","components/SortButtons.tsx","App.tsx","index.tsx"],"names":["loadTodos","todos","type","setErrorMessage","message","setSortBy","sortBy","getLoadedTodos","state","isLoading","loading","getMessage","getSortBy","getSortOrder","reverseOrder","initialState","store","createStore","action","visibleTodos","filter","todo","id","composeWithDevTools","TodoItem","dispatch","useDispatch","className","completed","onClick","user","name","title","TodoList","loadedTodos","useSelector","selector","reverse","sortType","sortedTodos","sort","a","b","localeCompare","getVisibleTodos","map","key","getUsers","fetch","response","json","usersFromServer","getTodos","todosFromServer","getPreparedTodos","users","preparedTodos","find","userId","LoadingButtons","handleLoadClick","todosWithUsers","actionCreator","errorMessage","disabled","role","aria-hidden","hidden","length","SortButtons","App","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5c5fbf42.chunk.js","sourcesContent":["import { createStore, AnyAction } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\n// Action types - is just a constant. MUST have a unique value.\nconst LOAD_TODOS = 'LOAD_TODOS';\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\nconst SET_ERROR_MESSAGE = 'SET_ERROR_MESSAGE';\nconst SORT_BY = 'SORT_BY';\nconst SET_SORTED_TODOS = 'SET_SORTED_TODOS';\nconst CHANGE_REVERSE = 'CHANGE_REVERSE';\nconst DELETE_TODO = 'DELETE_TODO';\n\n// Action creators - a function returning an action object\nexport const loadTodos = ((todos: Todo[]) => ({ type: LOAD_TODOS, todos }));\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = () => ({ type: FINISH_LOADING });\nexport const setErrorMessage = (message = '') => ({ type: SET_ERROR_MESSAGE, message });\nexport const setSortBy = (sortBy = '') => ({ type: SORT_BY, sortBy });\nexport const setSortedTodos = (visibleTodos: Todo[]) => ({ type: SET_SORTED_TODOS, visibleTodos });\nexport const changeReverse = () => ({ type: CHANGE_REVERSE });\nexport const deleteTodo = (id: number) => ({ type: DELETE_TODO, id });\n\n// Selectors - a function receiving Redux state and returning some data from it\nexport const getLoadedTodos = (state: RootState) => state.todos;\nexport const isLoading = (state: RootState) => state.loading;\nexport const getMessage = (state: RootState) => state.message;\nexport const getSortBy = (state: RootState) => state.sortBy;\nexport const getSortOrder = (state: RootState) => state.reverseOrder;\n\n// Initial state\nexport type RootState = {\n  todos: Todo[];\n  loading: boolean;\n  message: string;\n  sortBy: string;\n  reverseOrder: boolean;\n};\n\nconst initialState: RootState = {\n  todos: [],\n  loading: false,\n  message: '',\n  sortBy: '',\n  reverseOrder: false,\n};\n\n// rootReducer - this function is called after dispatching an action\nconst rootReducer = (state = initialState, action: AnyAction) => {\n  switch (action.type) {\n    case LOAD_TODOS:\n      return {\n        ...state,\n        todos: action.todos,\n      };\n    case SET_SORTED_TODOS:\n      return {\n        ...state,\n        todos: action.visibleTodos,\n      };\n    case START_LOADING:\n      return { ...state, loading: true };\n    case FINISH_LOADING:\n      return {\n        ...state,\n        loading: false,\n      };\n    case SET_ERROR_MESSAGE:\n      return {\n        ...state,\n        message: action.message,\n      };\n    case SORT_BY:\n      return {\n        ...state,\n        sortBy: action.sortBy,\n      };\n    case CHANGE_REVERSE:\n      return {\n        ...state,\n        reverseOrder: !state.reverseOrder,\n      };\n    case DELETE_TODO:\n      return {\n        ...state,\n        todos: state.todos.filter(todo => todo.id !== action.id),\n      };\n    default:\n      return state;\n  }\n};\n\n// The `store` should be passed to the <Provider store={store}> in `/src/index.tsx`\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(), // allows you to use http://extension.remotedev.io/\n);\n\nexport default store;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport * as actionCreator from '../store';\n\ntype Props = {\n  todo: Todo;\n};\n\nexport const TodoItem: React.FC<Props> = ({ todo }) => {\n  const dispatch = useDispatch();\n\n  return (\n    <div\n      className=\"card text-white bg-primary mb-3 item\"\n    >\n      <div className=\"card-header posrel\">\n        <span>\n          No.\n          {todo.id}\n        </span>\n        <br />\n        Status:\n        {\n          todo.completed\n            ? ' Finished'\n            : ' Active'\n        }\n        <button\n          type=\"button\"\n          className=\"removeBtn\"\n          onClick={() => dispatch(actionCreator.deleteTodo(todo.id))}\n        >\n          X\n        </button>\n      </div>\n      <div className=\"card-body\">\n        <h5 className=\"card-title\">{todo.user ? todo.user.name : 'unknown'}</h5>\n        <p className=\"card-text\">{todo.title}</p>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport * as selector from '../store';\nimport { TodoItem } from './TodoItem';\n\nconst TodoList = () => {\n  const loadedTodos = useSelector(selector.getLoadedTodos);\n  const sortBy = useSelector(selector.getSortBy);\n  const reverse = useSelector(selector.getSortOrder);\n\n  const getVisibleTodos = (sortType: string, todos: Todo[]) => {\n    let sortedTodos = [];\n\n    switch (sortType) {\n      case 'title':\n        sortedTodos = [...todos].sort((a, b) => a.title.localeCompare(b.title));\n        break;\n\n      case 'id':\n        sortedTodos = [...todos].sort((a, b) => a.id - b.id);\n        break;\n\n      case 'user':\n        sortedTodos = [...todos].sort((a, b) => {\n          return a.user && b.user\n            ? a.user?.name.localeCompare(b.user.name)\n            : 0;\n        });\n        break;\n\n      default:\n        return [...todos];\n    }\n\n    if (reverse) {\n      sortedTodos.reverse();\n    }\n\n    return sortedTodos;\n  };\n\n  const visibleTodos = getVisibleTodos(sortBy, loadedTodos);\n\n\n  return (\n    <ul className=\"cards__list\">\n      {visibleTodos.map(todo => (\n        <li key={todo.id}>\n          <TodoItem todo={todo} />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default TodoList;\n","const URL_TODOS = 'https://mate-academy.github.io/react_dynamic-list-of-todos/api/todos.json';\nconst URL_USERS = 'https://mate-academy.github.io/react_dynamic-list-of-todos/api/users.json';\n\nconst getUsers = async (): Promise<PersonFromServer[]> => {\n  const response = await fetch(URL_USERS);\n  const usersFromServer = await response.json();\n\n  return usersFromServer;\n};\n\nconst getTodos = async (): Promise<TodoFromServer[]> => {\n  const response = await fetch(URL_TODOS);\n  const todosFromServer = await response.json();\n\n  return todosFromServer;\n};\n\nexport const getPreparedTodos = async (): Promise<Todo[]> => {\n  const todos = await getTodos();\n  const users = await getUsers();\n  const preparedTodos = todos.map(todo => ({\n    ...todo,\n    user: users.find(user => todo.userId === user.id) as PersonFromServer,\n  }));\n\n  return preparedTodos;\n};\n","/* eslint-disable import/no-duplicates */\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getPreparedTodos } from '../helpers/api';\nimport * as selector from '../store';\nimport * as actionCreator from '../store';\n\nconst LoadingButtons = () => {\n  const dispatch = useDispatch();\n\n  const handleLoadClick = async () => {\n    dispatch(actionCreator.startLoading()); // dispatch isLoading to true\n\n    try {\n      const todosWithUsers = await getPreparedTodos();\n\n      dispatch(actionCreator.loadTodos(todosWithUsers));\n    } catch (error) {\n      dispatch(actionCreator.finishLoading());\n      dispatch(actionCreator.setErrorMessage('Errors happens, try to reload')); // dispatch some error message\n    }\n\n    dispatch(actionCreator.finishLoading()); // dispatch isLoading to false\n  };\n\n  const isLoading = useSelector(selector.isLoading);\n  const todos = useSelector(selector.getLoadedTodos);\n  const errorMessage = useSelector(selector.getMessage);\n\n\n  return (\n    isLoading\n      ? (\n        <button className=\"btn btn-primary\" type=\"button\" disabled>\n          <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" />\n          Loading...\n        </button>\n      )\n      : (\n        <>\n          <button\n            className=\"btn btn-primary\"\n            type=\"button\"\n            onClick={handleLoadClick}\n            hidden={todos.length !== 0}\n          >\n            <span role=\"status\" aria-hidden=\"true\" />\n            Load\n          </button>\n          <p\n            className=\"alert alert-primary mt5\"\n            hidden={errorMessage === ''}\n            role=\"alert\"\n          >\n            {`¯\\\\_(ツ)_/¯ ${errorMessage}`}\n          </p>\n        </>\n      )\n  );\n};\n\nexport default LoadingButtons;\n","/* eslint-disable import/no-duplicates */\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport * as selector from '../store';\nimport * as actionCreator from '../store';\n\nconst SortButtons = () => {\n  const todos = useSelector(selector.getLoadedTodos);\n  const dispatch = useDispatch();\n\n  return (\n    <div className=\"sorting-btns\" hidden={todos.length === 0}>\n      <button\n        type=\"button\"\n        className=\"btn btn-success btn-sort\"\n        onClick={() => {\n          dispatch(actionCreator.setSortBy('title'));\n          dispatch(actionCreator.changeReverse());\n        }}\n      >\n        Sort by Title\n      </button>\n      <button\n        type=\"button\"\n        className=\"btn btn-danger btn-sort\"\n        onClick={() => {\n          dispatch(actionCreator.setSortBy('id'));\n          dispatch(actionCreator.changeReverse());\n        }}\n      >\n        Sort by ID\n      </button>\n      <button\n        type=\"button\"\n        className=\"btn btn-warning btn-sort\"\n        onClick={() => {\n          dispatch(actionCreator.setSortBy('user'));\n          dispatch(actionCreator.changeReverse());\n        }}\n      >\n        Sort by User\n      </button>\n      <button\n        type=\"button\"\n        className=\"btn btn-secondary btn-sort\"\n        onClick={() => dispatch(actionCreator.setSortBy(''))}\n      >\n        RESET\n      </button>\n    </div>\n  );\n};\n\nexport default SortButtons;\n","/* eslint-disable import/no-duplicates */\nimport React from 'react';\nimport './App.scss';\n\nimport TodoList from './components/TodosList';\nimport LoadingButtons from './components/LoadingButtons';\nimport SortButtons from './components/SortButtons';\n\nconst App = () => {\n  return (\n    <div className=\"app\">\n      <h1>Redux list of todos</h1>\n      <LoadingButtons />\n\n      <SortButtons />\n\n      <TodoList />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport store from './store';\nimport App from './App';\n\n// Just a convenient component with all the wrappers for the `App`\n// The Router component (if you use it) should be placed inside the Provider\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}